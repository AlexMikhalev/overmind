{% extends "base.html" %}
{% block title %}: New Node{% endblock %}
{% block script %}
    <script>
        function getNodeForm() {
            var toOpacity = 0.3;
            var duration = 100;
            var provider = $("input:radio[name='provider']:checked").val();
            $("form#newnode").fadeTo(duration, toOpacity);
            $('#loading').show();
            $("form#newnode").load("new/?provider=" + provider, function(responseText) {
                $('#loading').hide();
                $("form#newnode").fadeTo(duration,1);
            });
        }
        
        $(function() {
            $('#loading').hide();
            $('#nav_newnode').addClass('selected');
            $("input:radio[name='provider']").change(getNodeForm);
            
            $('form#newnode').submit(function() {
                ajaxSubmit($(this), '/overview/');
                //prevent form from submitting
                return false;
            });
        });
    </script>
{% endblock %}
{% block sidebar %}{% endblock %}

{% block content %}
    <h2>Launch a new node</h2>
    <ul>
        <li>
            <h3>Provider</h3>
            {% if not provider_list|length %}<p>No providers configured yet{% endif %}
            <ul>{% for provider in provider_list %}
            <li>
                <input id="provider_{{ provider.id }}" type="radio" name="provider" value="{{ provider.id }}" />
                <label for="provider_{{ provider.id }}">{{ provider }}</label>
            </li>{% endfor %}
            </ul>
        </li>
    </ul>
    <hr />
    <form id="newnode" action="new/" method="post"></form>
    <div id="loading"></div>
{% endblock %}

